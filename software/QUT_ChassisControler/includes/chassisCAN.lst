   1               		.file	"chassisCAN.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.section	.text.CAN_send,"ax",@progbits
  12               	.global	CAN_send
  14               	CAN_send:
  15               	.LFB10:
  16               		.file 1 "includes/chassisCAN.c"
   1:includes/chassisCAN.c **** /**
   2:includes/chassisCAN.c ****  * @file chassisCAN.c
   3:includes/chassisCAN.c ****  * @author Jonn Dillon
   4:includes/chassisCAN.c ****  * @date 16/4/2018
   5:includes/chassisCAN.c ****  * @brief Handles functions, calls and utilities related to the CANBUS's
   6:includes/chassisCAN.c ****  **/
   7:includes/chassisCAN.c **** 
   8:includes/chassisCAN.c **** #include "chassisCAN.h"
   9:includes/chassisCAN.c **** 
  10:includes/chassisCAN.c **** // Serves as a wrapper for MCP2515_TX in MCP2515_TX.h - for more info refer to that.
  11:includes/chassisCAN.c **** void CAN_send(uint8_t CANbus, uint8_t numBytes, uint8_t * data, uint32_t ID) {
  17               		.loc 1 11 0
  18               		.cfi_startproc
  19               	.LVL0:
  20 0000 8F92      		push r8
  21               	.LCFI0:
  22               		.cfi_def_cfa_offset 3
  23               		.cfi_offset 8, -2
  24 0002 9F92      		push r9
  25               	.LCFI1:
  26               		.cfi_def_cfa_offset 4
  27               		.cfi_offset 9, -3
  28 0004 AF92      		push r10
  29               	.LCFI2:
  30               		.cfi_def_cfa_offset 5
  31               		.cfi_offset 10, -4
  32 0006 BF92      		push r11
  33               	.LCFI3:
  34               		.cfi_def_cfa_offset 6
  35               		.cfi_offset 11, -5
  36 0008 CF92      		push r12
  37               	.LCFI4:
  38               		.cfi_def_cfa_offset 7
  39               		.cfi_offset 12, -6
  40 000a DF92      		push r13
  41               	.LCFI5:
  42               		.cfi_def_cfa_offset 8
  43               		.cfi_offset 13, -7
  44 000c EF92      		push r14
  45               	.LCFI6:
  46               		.cfi_def_cfa_offset 9
  47               		.cfi_offset 14, -8
  48 000e FF92      		push r15
  49               	.LCFI7:
  50               		.cfi_def_cfa_offset 10
  51               		.cfi_offset 15, -9
  52 0010 0F93      		push r16
  53               	.LCFI8:
  54               		.cfi_def_cfa_offset 11
  55               		.cfi_offset 16, -10
  56 0012 1F93      		push r17
  57               	.LCFI9:
  58               		.cfi_def_cfa_offset 12
  59               		.cfi_offset 17, -11
  60 0014 CF93      		push r28
  61               	.LCFI10:
  62               		.cfi_def_cfa_offset 13
  63               		.cfi_offset 28, -12
  64 0016 DF93      		push r29
  65               	.LCFI11:
  66               		.cfi_def_cfa_offset 14
  67               		.cfi_offset 29, -13
  68               	/* prologue: function */
  69               	/* frame size = 0 */
  70               	/* stack size = 12 */
  71               	.L__stack_usage = 12
  72 0018 C82F      		mov r28,r24
  73 001a D62F      		mov r29,r22
  74 001c 6A01      		movw r12,r20
  75 001e 4801      		movw r8,r16
  76 0020 5901      		movw r10,r18
  12:includes/chassisCAN.c ****     MCP2515_TX(CANbus, MCP2515_findFreeTxBuffer(CANbus), numBytes, data, ID);
  77               		.loc 1 12 0
  78 0022 0E94 0000 		call MCP2515_findFreeTxBuffer
  79               	.LVL1:
  80 0026 8501      		movw r16,r10
  81               	.LVL2:
  82 0028 7401      		movw r14,r8
  83 002a 9601      		movw r18,r12
  84 002c 4D2F      		mov r20,r29
  85 002e 682F      		mov r22,r24
  86 0030 8C2F      		mov r24,r28
  87 0032 0E94 0000 		call MCP2515_TX
  88               	.LVL3:
  89               	/* epilogue start */
  13:includes/chassisCAN.c **** }
  90               		.loc 1 13 0
  91 0036 DF91      		pop r29
  92               	.LVL4:
  93 0038 CF91      		pop r28
  94               	.LVL5:
  95 003a 1F91      		pop r17
  96 003c 0F91      		pop r16
  97 003e FF90      		pop r15
  98 0040 EF90      		pop r14
  99 0042 DF90      		pop r13
 100 0044 CF90      		pop r12
 101               	.LVL6:
 102 0046 BF90      		pop r11
 103 0048 AF90      		pop r10
 104 004a 9F90      		pop r9
 105 004c 8F90      		pop r8
 106 004e 0895      		ret
 107               		.cfi_endproc
 108               	.LFE10:
 110               		.section	.text.CAN_ID_constructor,"ax",@progbits
 111               	.global	CAN_ID_constructor
 113               	CAN_ID_constructor:
 114               	.LFB11:
  14:includes/chassisCAN.c **** 
  15:includes/chassisCAN.c **** // Construct a unique CAN packet identifier
  16:includes/chassisCAN.c **** uint32_t CAN_ID_constructor(uint32_t sendingID, unsigned char type, unsigned char address, uint32_t
 115               		.loc 1 16 0
 116               		.cfi_startproc
 117               	.LVL7:
 118 0000 EF92      		push r14
 119               	.LCFI12:
 120               		.cfi_def_cfa_offset 3
 121               		.cfi_offset 14, -2
 122 0002 FF92      		push r15
 123               	.LCFI13:
 124               		.cfi_def_cfa_offset 4
 125               		.cfi_offset 15, -3
 126 0004 0F93      		push r16
 127               	.LCFI14:
 128               		.cfi_def_cfa_offset 5
 129               		.cfi_offset 16, -4
 130 0006 1F93      		push r17
 131               	.LCFI15:
 132               		.cfi_def_cfa_offset 6
 133               		.cfi_offset 17, -5
 134               	/* prologue: function */
 135               	/* frame size = 0 */
 136               	/* stack size = 4 */
 137               	.L__stack_usage = 4
 138 0008 E42F      		mov r30,r20
  17:includes/chassisCAN.c ****     return (
  18:includes/chassisCAN.c ****         sendingID|                  // Sending ID, ( First 8 bits, define the device to send to)
  19:includes/chassisCAN.c ****         ((uint32_t)type<<18)|       // What sort of command to send
  20:includes/chassisCAN.c ****         ((uint32_t)address<<13)|    // Specific address
 139               		.loc 1 20 0
 140 000a 30E0      		ldi r19,0
 141 000c 50E0      		ldi r21,0
 142 000e 40E0      		ldi r20,0
 143               	.LVL8:
 144 0010 FDE0      		ldi r31,13
 145               		1:
 146 0012 220F      		lsl r18
 147 0014 331F      		rol r19
 148 0016 441F      		rol r20
 149 0018 551F      		rol r21
 150 001a FA95      		dec r31
 151 001c 01F4      		brne 1b
 152               	.LVL9:
 153 001e 6E29      		or r22,r14
 154               	.LVL10:
 155 0020 7F29      		or r23,r15
 156 0022 802B      		or r24,r16
 157 0024 912B      		or r25,r17
 158 0026 622B      		or r22,r18
 159 0028 732B      		or r23,r19
 160 002a 842B      		or r24,r20
 161 002c 952B      		or r25,r21
  19:includes/chassisCAN.c ****         ((uint32_t)address<<13)|    // Specific address
 162               		.loc 1 19 0
 163 002e 0E2F      		mov r16,r30
 164 0030 10E0      		ldi r17,0
 165 0032 30E0      		ldi r19,0
 166 0034 20E0      		ldi r18,0
 167 0036 A2E1      		ldi r26,18
 168               		1:
 169 0038 000F      		lsl r16
 170 003a 111F      		rol r17
 171 003c 221F      		rol r18
 172 003e 331F      		rol r19
 173 0040 AA95      		dec r26
 174 0042 01F4      		brne 1b
 175               		.loc 1 20 0
 176 0044 602B      		or r22,r16
 177 0046 712B      		or r23,r17
 178 0048 822B      		or r24,r18
 179 004a 932B      		or r25,r19
 180               	/* epilogue start */
  21:includes/chassisCAN.c ****         status                      // SubID?
  22:includes/chassisCAN.c ****     );
  23:includes/chassisCAN.c **** }
 181               		.loc 1 23 0
 182 004c 1F91      		pop r17
 183 004e 0F91      		pop r16
 184 0050 FF90      		pop r15
 185 0052 EF90      		pop r14
 186               	.LVL11:
 187 0054 0895      		ret
 188               		.cfi_endproc
 189               	.LFE11:
 191               		.section	.text.CAN_pull_packet,"ax",@progbits
 192               	.global	CAN_pull_packet
 194               	CAN_pull_packet:
 195               	.LFB12:
  24:includes/chassisCAN.c **** 
  25:includes/chassisCAN.c **** // Serves as a wrapper for the MCP2515_PullCanPacket(..) in MCP2515.h - For more info refer to that
  26:includes/chassisCAN.c **** void CAN_pull_packet(uint8_t CANbus, uint8_t* numBytes, uint8_t* data, uint32_t* ID) {
 196               		.loc 1 26 0
 197               		.cfi_startproc
 198               	.LVL12:
 199 0000 AF92      		push r10
 200               	.LCFI16:
 201               		.cfi_def_cfa_offset 3
 202               		.cfi_offset 10, -2
 203 0002 BF92      		push r11
 204               	.LCFI17:
 205               		.cfi_def_cfa_offset 4
 206               		.cfi_offset 11, -3
 207 0004 CF92      		push r12
 208               	.LCFI18:
 209               		.cfi_def_cfa_offset 5
 210               		.cfi_offset 12, -4
 211 0006 DF92      		push r13
 212               	.LCFI19:
 213               		.cfi_def_cfa_offset 6
 214               		.cfi_offset 13, -5
 215 0008 EF92      		push r14
 216               	.LCFI20:
 217               		.cfi_def_cfa_offset 7
 218               		.cfi_offset 14, -6
 219 000a FF92      		push r15
 220               	.LCFI21:
 221               		.cfi_def_cfa_offset 8
 222               		.cfi_offset 15, -7
 223 000c 0F93      		push r16
 224               	.LCFI22:
 225               		.cfi_def_cfa_offset 9
 226               		.cfi_offset 16, -8
 227 000e 1F93      		push r17
 228               	.LCFI23:
 229               		.cfi_def_cfa_offset 10
 230               		.cfi_offset 17, -9
 231 0010 CF93      		push r28
 232               	.LCFI24:
 233               		.cfi_def_cfa_offset 11
 234               		.cfi_offset 28, -10
 235               	/* prologue: function */
 236               	/* frame size = 0 */
 237               	/* stack size = 9 */
 238               	.L__stack_usage = 9
 239 0012 C82F      		mov r28,r24
 240 0014 7B01      		movw r14,r22
 241 0016 6A01      		movw r12,r20
 242 0018 5901      		movw r10,r18
  27:includes/chassisCAN.c **** 	// Receive the status of the buffers RXB0 and RXB1
  28:includes/chassisCAN.c **** 	uint8_t status = MCP2515_check_receive_status(CANbus);
 243               		.loc 1 28 0
 244 001a 0E94 0000 		call MCP2515_check_receive_status
 245               	.LVL13:
  29:includes/chassisCAN.c **** 	// Check which receive buffer contains the data (or if both contain) by checking bits 7:6
  30:includes/chassisCAN.c **** 	switch(status>>6) {
 246               		.loc 1 30 0
 247 001e 8295      		swap r24
 248               	.LVL14:
 249 0020 8695      		lsr r24
 250 0022 8695      		lsr r24
 251 0024 8370      		andi r24,lo8(3)
 252 0026 8130      		cpi r24,lo8(1)
 253 0028 00F0      		brlo .L3
  31:includes/chassisCAN.c **** 		case 1:	// Message in RXB0
  32:includes/chassisCAN.c **** 			MCP2515_PullCanPacket(CANbus, MCP2515_RXB0SIDH, numBytes, data, ID);
 254               		.loc 1 32 0
 255 002a 8501      		movw r16,r10
  30:includes/chassisCAN.c **** 		case 1:	// Message in RXB0
 256               		.loc 1 30 0
 257 002c 8330      		cpi r24,lo8(3)
 258 002e 00F0      		brlo .L7
 259 0030 8330      		cpi r24,lo8(3)
 260 0032 01F0      		breq .L6
 261               	.L3:
 262               	/* epilogue start */
  33:includes/chassisCAN.c **** 			break;
  34:includes/chassisCAN.c **** 		case 2: // Message in RXB1
  35:includes/chassisCAN.c **** 			MCP2515_PullCanPacket(CANbus, MCP2515_RXB0SIDH, numBytes, data, ID);
  36:includes/chassisCAN.c **** 			break;
  37:includes/chassisCAN.c **** 		case 3: // Message in both buffers
  38:includes/chassisCAN.c **** 			MCP2515_PullCanPacket(CANbus, MCP2515_RXB0SIDH, numBytes, data, ID);
  39:includes/chassisCAN.c **** 			MCP2515_PullCanPacket(CANbus, MCP2515_RXB0SIDH, numBytes, data, ID);
  40:includes/chassisCAN.c **** 			break;
  41:includes/chassisCAN.c **** 		default:
  42:includes/chassisCAN.c **** 			break;
  43:includes/chassisCAN.c **** 	}
  44:includes/chassisCAN.c **** }
 263               		.loc 1 44 0
 264 0034 CF91      		pop r28
 265               	.LVL15:
 266 0036 1F91      		pop r17
 267 0038 0F91      		pop r16
 268 003a FF90      		pop r15
 269 003c EF90      		pop r14
 270               	.LVL16:
 271 003e DF90      		pop r13
 272 0040 CF90      		pop r12
 273               	.LVL17:
 274 0042 BF90      		pop r11
 275 0044 AF90      		pop r10
 276               	.LVL18:
 277 0046 0895      		ret
 278               	.LVL19:
 279               	.L6:
  38:includes/chassisCAN.c **** 			MCP2515_PullCanPacket(CANbus, MCP2515_RXB0SIDH, numBytes, data, ID);
 280               		.loc 1 38 0
 281 0048 9601      		movw r18,r12
 282 004a A701      		movw r20,r14
 283 004c 61E6      		ldi r22,lo8(97)
 284 004e 8C2F      		mov r24,r28
 285 0050 0E94 0000 		call MCP2515_PullCanPacket
 286               	.LVL20:
 287               	.L7:
  39:includes/chassisCAN.c **** 			break;
 288               		.loc 1 39 0
 289 0054 9601      		movw r18,r12
 290 0056 A701      		movw r20,r14
 291 0058 61E6      		ldi r22,lo8(97)
 292 005a 8C2F      		mov r24,r28
 293 005c 0E94 0000 		call MCP2515_PullCanPacket
 294               	.LVL21:
 295               		.loc 1 44 0
 296 0060 00C0      		rjmp .L3
 297               		.cfi_endproc
 298               	.LFE12:
 300               		.text
 301               	.Letext0:
 302               		.file 2 "/usr/local/Cellar/avr-gcc/7.3.0/avr/include/stdlib.h"
 303               		.file 3 "/usr/local/Cellar/avr-gcc/7.3.0/lib/avr-gcc/7/gcc/avr/7.3.0/include/stddef.h"
 304               		.file 4 "/usr/local/Cellar/avr-gcc/7.3.0/avr/include/stdint.h"
 305               		.file 5 "./utils/MCP2515.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 chassisCAN.c
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:4      *ABS*:000000000000003f __SREG__
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:5      *ABS*:000000000000003b __RAMPZ__
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:6      *ABS*:0000000000000000 __tmp_reg__
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:7      *ABS*:0000000000000001 __zero_reg__
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:14     .text.CAN_send:0000000000000000 CAN_send
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:113    .text.CAN_ID_constructor:0000000000000000 CAN_ID_constructor
/var/folders/my/0z6f376568j9tywzmdyvysy80000gn/T//ccow6Pn6.s:194    .text.CAN_pull_packet:0000000000000000 CAN_pull_packet

UNDEFINED SYMBOLS
MCP2515_findFreeTxBuffer
MCP2515_TX
MCP2515_check_receive_status
MCP2515_PullCanPacket
